{"version":3,"sources":["../../src/tooltip/tooltip.ts"],"names":[],"mappings":"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","file":"tooltip.js","sourceRoot":"","sourcesContent":["import {\n  AfterContentInit, Component, ContentChild, ElementRef, Input,\n  Renderer2, TemplateRef, ViewChild,\n} from '@angular/core';\nimport { fadeAnimation } from '../shared/animation/index';\nimport { WindowWrapper } from '../shared/services/index';\nimport { getRealShape, getPositionForDir } from '../shared/utils/index';\n\nexport type Shape = { width: number, height: number }\nexport class ElTooltip implements AfterContentInit {\n  \n   disabled: boolean = false\n   watch: boolean = false\n   placement: string = 'bottom'\n   popperClass: string\n   effect: string = 'dark'\n   visibleArrow: boolean = true\n   popperContent: ElementRef\n   tip: TemplateRef<any>\n  \n  xPlacement: string = 'bottom'\n  showPopper: boolean = true\n  cache: any = {}\n  tipElementShape: Shape\n/**\n * @param {?} renderer\n * @param {?} el\n * @param {?} window\n */\nconstructor(\nprivate renderer: Renderer2,\nprivate el: ElementRef,\nprivate window: WindowWrapper,\n  ) {\n  }\n/**\n * @param {?} hostRect\n * @param {?} selfRect\n * @return {?}\n */\ngetPosition(hostRect: any, selfRect: any): void {\n    const /** @type {?} */ doubleConventions: boolean = this.placement.includes('-')\n    const /** @type {?} */ arrowDir: string = doubleConventions ? this.placement.split('-')[1] : 'center'\n    const /** @type {?} */ dir: string = doubleConventions ? this.placement.split('-')[0] : this.placement\n    const /** @type {?} */ position: any = getPositionForDir(hostRect, selfRect, dir, arrowDir)\n    this.cache.position = position\n    this.cache.hostRect = hostRect\n  }\n/**\n * @return {?}\n */\nsetPopoerPositionAndShow(): void {\n    const { tipElement, position } = this.cache\n    const /** @type {?} */ arrowElement: Element = tipElement.querySelector('.popper__arrow')\n    this.xPlacement = position.arrowFace\n    this.renderer.setStyle(tipElement, 'left', `${position.left}px`)\n    this.renderer.setStyle(tipElement, 'top', `${position.top}px`)\n    \n    // fix tipbox auto wrap\n    this.renderer.setStyle(tipElement, 'width', `${this.tipElementShape.width}px`)\n    this.renderer.setStyle(tipElement, 'height', `${this.tipElementShape.height}px`)\n    this.renderer.setStyle(arrowElement, position.arrowDir, `${position.arrowPosition}px`)\n  }\n/**\n * @param {?} host\n * @return {?}\n */\nbindEvent(host: HTMLElement): void {\n    host.addEventListener('mouseenter', () => {\n      if (this.disabled) return\n      this.setPopoerPositionAndShow()\n      this.showPopper = true\n    })\n    host.addEventListener('mouseleave', () => {\n      this.showPopper = false\n      this.watch && this.update()\n    })\n  }\n/**\n * @return {?}\n */\nupdate(): void {\n    const { tipElement, hostRect } = this.cache\n    this.renderer.setStyle(tipElement, 'width', 'auto')\n    this.renderer.setStyle(tipElement, 'height', 'auto')\n    setTimeout(() => {\n      this.tipElementShape = getRealShape(tipElement)\n      const /** @type {?} */ tipRect = { width: tipElement.offsetWidth, height: tipElement.offsetHeight }\n      this.getPosition(hostRect, tipRect)\n      this.renderer.setStyle(tipElement, 'width', `${this.tipElementShape.width}px`)\n      this.renderer.setStyle(tipElement, 'height', `${this.tipElementShape.height}px`)\n    }, 0)\n  }\n/**\n * @return {?}\n */\nngAfterContentInit(): void {\n    const /** @type {?} */ tipElement: HTMLElement = this.popperContent.nativeElement\n    const /** @type {?} */ hostElement: HTMLElement = this.el.nativeElement.children[0]\n    this.bindEvent(hostElement)\n    this.cache.tipElement = tipElement\n  \n    const /** @type {?} */ timer = setTimeout(() => {\n      this.tipElementShape = getRealShape(tipElement)\n      const /** @type {?} */ tipRect = { width: tipElement.offsetWidth, height: tipElement.offsetHeight }\n      const /** @type {?} */ hostRect = hostElement.getBoundingClientRect()\n      this.getPosition(hostRect, tipRect)\n      clearTimeout(timer)\n    }, 0)\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'el-tooltip',\n  template: `\n    <div style=\"position: relative; display: inline-block;\">\n      <div [class]=\"'el-tooltip__popper is-' + effect + ' ' + popperClass\"\n        style=\"left: -20000px; top: 0; position: absolute;\"\n        [@fadeAnimation]=\"!showPopper\" [attr.x-placement]=\"xPlacement\" #popperContent>\n        <div x-arrow class=\"popper__arrow\" [hidden]=\"!visibleArrow\"></div>\n        <ng-template [ngTemplateOutlet]=\"tip\"></ng-template>\n      </div>\n      <ng-content></ng-content>\n    </div>\n  `,\n  animations: [fadeAnimation],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n{type: ElementRef, },\n{type: WindowWrapper, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'disabled': [{ type: Input },],\n'watch': [{ type: Input },],\n'placement': [{ type: Input },],\n'popperClass': [{ type: Input },],\n'effect': [{ type: Input },],\n'visibleArrow': [{ type: Input, args: ['visible-arrow', ] },],\n'popperContent': [{ type: ViewChild, args: ['popperContent', ] },],\n'tip': [{ type: ContentChild, args: ['tip', ] },],\n};\n}\n\nfunction ElTooltip_tsickle_Closure_declarations() {\n/** @type {?} */\nElTooltip.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElTooltip.ctorParameters;\n/** @type {?} */\nElTooltip.propDecorators;\n/** @type {?} */\nElTooltip.prototype.disabled;\n/** @type {?} */\nElTooltip.prototype.watch;\n/** @type {?} */\nElTooltip.prototype.placement;\n/** @type {?} */\nElTooltip.prototype.popperClass;\n/** @type {?} */\nElTooltip.prototype.effect;\n/** @type {?} */\nElTooltip.prototype.visibleArrow;\n/** @type {?} */\nElTooltip.prototype.popperContent;\n/** @type {?} */\nElTooltip.prototype.tip;\n/** @type {?} */\nElTooltip.prototype.xPlacement;\n/** @type {?} */\nElTooltip.prototype.showPopper;\n/** @type {?} */\nElTooltip.prototype.cache;\n/** @type {?} */\nElTooltip.prototype.tipElementShape;\n/** @type {?} */\nElTooltip.prototype.renderer;\n/** @type {?} */\nElTooltip.prototype.el;\n/** @type {?} */\nElTooltip.prototype.window;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}